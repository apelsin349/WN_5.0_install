# üü° –í–ê–ñ–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø WORKERNET INSTALLER v5.0

> **–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** 23 –æ–∫—Ç—è–±—Ä—è 2025  
> **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –í–ê–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –ò–°–ü–†–ê–í–õ–ï–ù–´**

---

## üìã –ò–°–ü–†–ê–í–õ–ï–ù–ù–´–ï –í–ê–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### üü° –í–ê–ñ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ PHP-FPM —Å–æ–∫–µ—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–Ω—ã–µ –ø—É—Ç–∏ –∫ PHP-FPM —Å–æ–∫–µ—Ç–∞–º –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –û–° –∏ –≤–µ—Ä—Å–∏—è—Ö PHP

**–§–∞–π–ª:** `lib/webserver.sh:77-130`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—É—Ç—å –∫ PHP-FPM —Å–æ–∫–µ—Ç—É
get_php_fpm_socket() {
    local os_type=$(get_os_type)
    local php_socket=""
    
    # –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –ø—É—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
    local possible_paths=()
    
    case $os_type in
        ubuntu|debian)
            possible_paths=(
                "/run/php/php8.3-fpm.sock"
                "/run/php/php8.2-fpm.sock"
                "/run/php/php8.1-fpm.sock"
                "/var/run/php/php8.3-fpm.sock"
                "/var/run/php/php8.2-fpm.sock"
            )
            ;;
        almalinux)
            possible_paths=(
                "/var/opt/remi/php83/run/php-fpm/www.sock"
                "/var/opt/remi/php82/run/php-fpm/www.sock"
                "/var/opt/remi/php81/run/php-fpm/www.sock"
                "/run/php-fpm/www.sock"
                "/var/run/php-fpm/www.sock"
            )
            ;;
    esac
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–æ–∫–µ—Ç—ã
    for path in "${possible_paths[@]}"; do
        if [ -S "$path" ]; then
            php_socket="unix:${path}|fcgi://localhost"
            log_debug "–ù–∞–π–¥–µ–Ω PHP-FPM —Å–æ–∫–µ—Ç: $path"
            break
        fi
    done
    
    # –ï—Å–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    if [ -z "$php_socket" ]; then
        case $os_type in
            ubuntu|debian)
                php_socket="unix:/run/php/php8.3-fpm.sock|fcgi://localhost"
                log_warn "PHP-FPM —Å–æ–∫–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è Ubuntu/Debian"
                ;;
            almalinux)
                php_socket="unix:/var/opt/remi/php83/run/php-fpm/www.sock|fcgi://localhost"
                log_warn "PHP-FPM —Å–æ–∫–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è AlmaLinux"
                ;;
        esac
    fi
    
    echo "$php_socket"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏ –∫ PHP-FPM —Å–æ–∫–µ—Ç—É

---

### üü° –í–ê–ñ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∏–º–µ–Ω —Å–µ—Ä–≤–∏—Å–æ–≤ Apache

**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–Ω—ã–µ –∏–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ Apache (apache2 vs httpd) –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –û–°

**–§–∞–π–ª:** `lib/webserver.sh:78-104`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ Apache
get_apache_service_name() {
    local os_type=$(get_os_type)
    local service_name=""
    
    case $os_type in
        ubuntu|debian)
            service_name="apache2"
            ;;
        almalinux)
            service_name="httpd"
            ;;
        *)
            # –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
            if systemctl list-unit-files | grep -q "apache2.service"; then
                service_name="apache2"
            elif systemctl list-unit-files | grep -q "httpd.service"; then
                service_name="httpd"
            else
                service_name="apache2"  # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
                log_warn "–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ Apache, –∏—Å–ø–æ–ª—å–∑—É–µ–º apache2"
            fi
            ;;
    esac
    
    log_debug "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∏–º—è —Å–µ—Ä–≤–∏—Å–∞ Apache: $service_name"
    echo "$service_name"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–∏—Å–∞ Apache

---

### üü° –í–ê–ñ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π –ø–∞–∫–µ—Ç–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

**–§–∞–π–ª:** `lib/common.sh:196-283`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é –ø–∞–∫–µ—Ç–∞
check_package_version() {
    local package=$1
    local min_version=$2
    local current_version=""
    
    case $(get_os_type) in
        ubuntu|debian)
            current_version=$(apt-cache policy "$package" 2>/dev/null | grep "Installed:" | awk '{print $2}' | head -1)
            ;;
        almalinux)
            current_version=$(rpm -q --queryformat '%{VERSION}' "$package" 2>/dev/null || echo "")
            ;;
    esac
    
    if [ -z "$current_version" ]; then
        log_debug "–ü–∞–∫–µ—Ç $package –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
        return 1
    fi
    
    log_debug "–í–µ—Ä—Å–∏—è –ø–∞–∫–µ—Ç–∞ $package: $current_version"
    
    # –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏ (–º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å)
    if [ -n "$min_version" ]; then
        if [ "$current_version" = "$min_version" ] || [ "$current_version" \> "$min_version" ]; then
            log_debug "–í–µ—Ä—Å–∏—è $package ($current_version) >= $min_version"
            return 0
        else
            log_warn "–í–µ—Ä—Å–∏—è $package ($current_version) < $min_version"
            return 1
        fi
    fi
    
    return 0
}

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –≤–µ—Ä—Å–∏—è–º
check_minimum_versions() {
    log_info "–ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤..."
    
    local errors=0
    
    # PostgreSQL
    if command_exists psql; then
        local pg_version=$(psql --version 2>/dev/null | grep -oP '\d+\.\d+' | head -1)
        if [ -n "$pg_version" ]; then
            if [ "${pg_version%%.*}" -ge 14 ]; then
                log_debug "PostgreSQL $pg_version (—Ç—Ä–µ–±—É–µ—Ç—Å—è 14+)"
            else
                log_warn "PostgreSQL $pg_version (—Ç—Ä–µ–±—É–µ—Ç—Å—è 14+)"
                ((errors++))
            fi
        fi
    fi
    
    # PHP
    if command_exists php; then
        local php_version=$(php -v 2>/dev/null | grep -oP '\d+\.\d+' | head -1)
        if [ -n "$php_version" ]; then
            if [ "${php_version%%.*}" -ge 8 ]; then
                log_debug "PHP $php_version (—Ç—Ä–µ–±—É–µ—Ç—Å—è 8+)"
            else
                log_warn "PHP $php_version (—Ç—Ä–µ–±—É–µ—Ç—Å—è 8+)"
                ((errors++))
            fi
        fi
    fi
    
    # Python
    if command_exists python3; then
        local python_version=$(python3 --version 2>/dev/null | grep -oP '\d+\.\d+' | head -1)
        if [ -n "$python_version" ]; then
            if [ "${python_version%%.*}" -ge 3 ]; then
                log_debug "Python $python_version (—Ç—Ä–µ–±—É–µ—Ç—Å—è 3+)"
            else
                log_warn "Python $python_version (—Ç—Ä–µ–±—É–µ—Ç—Å—è 3+)"
                ((errors++))
            fi
        fi
    fi
    
    if [ $errors -eq 0 ]; then
        log_debug "–í—Å–µ –≤–µ—Ä—Å–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º"
        return 0
    else
        log_warn "–û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –≤–µ—Ä—Å–∏—è–º–∏"
        return 1
    fi
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

---

### üü° –í–ê–ñ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 4: –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö —É—Å—Ç–∞–Ω–æ–≤–∫–∏

**–§–∞–π–ª:** `lib/common.sh:232-316`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–∫–∏
diagnose_error() {
    local component=$1
    local error=$2
    local exit_code=$3
    
    log_error "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"
    log_error "üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –û–®–ò–ë–ö–ò"
    log_error "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"
    log_error "–ö–æ–º–ø–æ–Ω–µ–Ω—Ç: $component"
    log_error "–û—à–∏–±–∫–∞: $error"
    log_error "–ö–æ–¥ –≤—ã—Ö–æ–¥–∞: $exit_code"
    log_error ""
    
    # –û–±—â–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã
    log_error "üìä –°–û–°–¢–û–Ø–ù–ò–ï –°–ò–°–¢–ï–ú–´:"
    log_error "OS: $(get_os_type) $(get_os_version)"
    log_error "RAM: $(free -h | awk '/Mem:/ {print $3 "/" $2}')"
    log_error "Disk: $(df -h / | awk 'NR==2 {print $3 "/" $2 " (" $5 ")"}')"
    log_error "Load: $(uptime | awk -F'load average:' '{print $2}')"
    log_error ""
    
    # –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
    case $component in
        "postgresql"|"database")
            log_error "üóÑÔ∏è –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê POSTGRESQL:"
            log_error "–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:"
            systemctl status postgresql 2>&1 | head -10 || true
            log_error ""
            log_error "–ü–æ—Ä—Ç—ã:"
            ss -tlnp | grep :5432 || log_error "  –ü–æ—Ä—Ç 5432 –Ω–µ —Å–ª—É—à–∞–µ—Ç—Å—è"
            log_error ""
            log_error "–ü—Ä–æ—Ü–µ—Å—Å—ã:"
            ps aux | grep postgres | head -5 || log_error "  –ü—Ä–æ—Ü–µ—Å—Å—ã PostgreSQL –Ω–µ –Ω–∞–π–¥–µ–Ω—ã"
            ;;
        "redis"|"cache")
            log_error "üíæ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê REDIS:"
            log_error "–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:"
            systemctl status redis 2>&1 | head -10 || true
            log_error ""
            log_error "–ü–æ—Ä—Ç—ã:"
            ss -tlnp | grep :6379 || log_error "  –ü–æ—Ä—Ç 6379 –Ω–µ —Å–ª—É—à–∞–µ—Ç—Å—è"
            ;;
        "rabbitmq"|"queue")
            log_error "üì® –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê RABBITMQ:"
            log_error "–°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–∞:"
            systemctl status rabbitmq-server 2>&1 | head -10 || true
            log_error ""
            log_error "–ü–æ—Ä—Ç—ã:"
            ss -tlnp | grep :5672 || log_error "  –ü–æ—Ä—Ç 5672 –Ω–µ —Å–ª—É—à–∞–µ—Ç—Å—è"
            ss -tlnp | grep :15672 || log_error "  –ü–æ—Ä—Ç 15672 –Ω–µ —Å–ª—É—à–∞–µ—Ç—Å—è"
            ;;
        "php"|"backend")
            log_error "‚öôÔ∏è –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê PHP:"
            if command_exists php; then
                log_error "–í–µ—Ä—Å–∏—è PHP: $(php -v | head -1)"
                log_error "–†–∞—Å—à–∏—Ä–µ–Ω–∏—è:"
                php -m | grep -E "(pgsql|redis|curl|mbstring)" || log_error "  –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç"
            else
                log_error "  PHP –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
            fi
            ;;
        "apache"|"nginx"|"webserver")
            log_error "üåê –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –í–ï–ë-–°–ï–†–í–ï–†–ê:"
            if [ "$WEBSERVER" = "apache" ]; then
                local apache_service=$(get_apache_service_name)
                log_error "–°—Ç–∞—Ç—É—Å Apache ($apache_service):"
                systemctl status "$apache_service" 2>&1 | head -10 || true
            else
                log_error "–°—Ç–∞—Ç—É—Å NGINX:"
                systemctl status nginx 2>&1 | head -10 || true
            fi
            log_error ""
            log_error "–ü–æ—Ä—Ç—ã:"
            ss -tlnp | grep -E ":(80|443)" || log_error "  –ü–æ—Ä—Ç—ã 80/443 –Ω–µ —Å–ª—É—à–∞—é—Ç—Å—è"
            ;;
    esac
    
    log_error ""
    log_error "üîß –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:"
    log_error "1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: tail -f /var/log/workernet/install_*.log"
    log_error "2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ: df -h"
    log_error "3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞–º—è—Ç—å: free -h"
    log_error "4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É: sudo ./install.sh --force"
    log_error "‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê"
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

---

### üü° –í–ê–ñ–ù–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 5: –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

**–§–∞–π–ª:** `lib/config.sh:6-95`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
```bash
# –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
validate_config() {
    local config_file="$1"
    local errors=0
    
    log_info "–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏..."
    
    if [ ! -f "$config_file" ]; then
        log_error "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω: $config_file"
        return 1
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ YAML (–±–∞–∑–æ–≤–∞—è)
    if ! grep -q "^[a-zA-Z]" "$config_file"; then
        log_error "–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –ø—É—Å—Ç –∏–ª–∏ –∏–º–µ–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç"
        ((errors++))
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–µ–∫—Ü–∏–π
    local required_sections=("workernet" "database" "redis" "rabbitmq" "php" "webserver")
    for section in "${required_sections[@]}"; do
        if ! grep -q "^${section}:" "$config_file"; then
            log_warn "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —Å–µ–∫—Ü–∏—è: $section"
            ((errors++))
        fi
    done
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–µ–∫—Ü–∏–∏ workernet
    if grep -q "^workernet:" "$config_file"; then
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–∏
        local version=$(grep -A 10 "^workernet:" "$config_file" | grep "version:" | awk '{print $2}' | tr -d '"')
        if [ -n "$version" ]; then
            if [[ ! "$version" =~ ^[3-5]\.x$ ]]; then
                log_error "–ù–µ–≤–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è WorkerNet: $version (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 3.x, 4.x –∏–ª–∏ 5.x)"
                ((errors++))
            fi
        fi
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
        local webserver=$(grep -A 10 "^workernet:" "$config_file" | grep "webserver:" | awk '{print $2}' | tr -d '"')
        if [ -n "$webserver" ]; then
            if [[ ! "$webserver" =~ ^(apache|nginx)$ ]]; then
                log_error "–ù–µ–≤–µ—Ä–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä: $webserver (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å apache –∏–ª–∏ nginx)"
                ((errors++))
            fi
        fi
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–µ–∫—Ü–∏–∏ database
    if grep -q "^database:" "$config_file"; then
        local db_port=$(grep -A 10 "^database:" "$config_file" | grep "port:" | awk '{print $2}' | tr -d '"')
        if [ -n "$db_port" ]; then
            if [[ ! "$db_port" =~ ^[0-9]+$ ]] || [ "$db_port" -lt 1024 ] || [ "$db_port" -gt 65535 ]; then
                log_error "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: $db_port (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 1024-65535)"
                ((errors++))
            fi
        fi
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–µ–∫—Ü–∏–∏ redis
    if grep -q "^redis:" "$config_file"; then
        local redis_port=$(grep -A 10 "^redis:" "$config_file" | grep "port:" | awk '{print $2}' | tr -d '"')
        if [ -n "$redis_port" ]; then
            if [[ ! "$redis_port" =~ ^[0-9]+$ ]] || [ "$redis_port" -lt 1024 ] || [ "$redis_port" -gt 65535 ]; then
                log_error "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–æ—Ä—Ç Redis: $redis_port (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å 1024-65535)"
                ((errors++))
            fi
        fi
    fi
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π –≤ —Å–µ–∫—Ü–∏–∏ php
    if grep -q "^php:" "$config_file"; then
        local php_version=$(grep -A 10 "^php:" "$config_file" | grep "version:" | awk '{print $2}' | tr -d '"')
        if [ -n "$php_version" ]; then
            if [[ ! "$php_version" =~ ^8\.[0-9]+$ ]]; then
                log_error "–ù–µ–≤–µ—Ä–Ω–∞—è –≤–µ—Ä—Å–∏—è PHP: $php_version (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 8.x)"
                ((errors++))
            fi
        fi
    fi
    
    # –ò—Ç–æ–≥–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
    if [ $errors -eq 0 ]; then
        log_info "‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–∞–ª–∏–¥–Ω–∞"
        return 0
    else
        log_error "‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ $errors –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"
        log_error "–ò—Å–ø—Ä–∞–≤—å—Ç–µ –æ—à–∏–±–∫–∏ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É —Å–Ω–æ–≤–∞"
        return 1
    fi
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞

```bash
# –í—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ—à–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
bash -n lib/webserver.sh    # ‚úÖ OK
bash -n lib/common.sh       # ‚úÖ OK  
bash -n lib/tests.sh        # ‚úÖ OK
bash -n lib/config.sh       # ‚úÖ OK
bash -n install.sh          # ‚úÖ OK
```

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–Ω—Ç–µ—Ä–∞

```bash
# –ù–∏–∫–∞–∫–∏—Ö –æ—à–∏–±–æ–∫ –ª–∏–Ω—Ç–µ—Ä–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
read_lints lib/webserver.sh lib/common.sh lib/tests.sh lib/config.sh install.sh
# ‚úÖ No linter errors found
```

---

## üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### üéØ –£–ª—É—á—à–µ–Ω–∏—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

| –ü—Ä–æ–±–ª–µ–º–∞ | –°—Ç–∞—Ç—É—Å | –†–µ—à–µ–Ω–∏–µ |
|----------|--------|---------|
| **PHP-FPM –ø—É—Ç–∏** | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–æ–≤ |
| **–ò–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ Apache** | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ |
| **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π** | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** | –í–∞–ª–∏–¥–∞—Ü–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π |
| **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫** | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** | –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ |
| **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** | ‚úÖ **–ò–°–ü–†–ê–í–õ–ï–ù–û** | –ü—Ä–æ–≤–µ—Ä–∫–∞ YAML —Ñ–∞–π–ª–æ–≤ |

### üõ°Ô∏è –ü–æ–≤—ã—à–µ–Ω–∏–µ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏

1. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤**
   - –ü—É—Ç–∏ –∫ PHP-FPM —Å–æ–∫–µ—Ç–∞–º
   - –ò–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ Apache
   - –í–µ—Ä—Å–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤

2. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**
   - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é
   - –°–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ YAML
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–µ–∫—Ü–∏–π

4. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ smoke tests
   - –î–µ—Ç–∞–ª—å–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

---

## üöÄ –ì–û–¢–û–í–ù–û–°–¢–¨ –ö PRODUCTION

### ‚úÖ –í–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã

- **PHP-FPM** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–∫–µ—Ç–æ–≤
- **Apache** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤
- **–í–µ—Ä—Å–∏–∏** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π
- **–û—à–∏–±–∫–∏** - –¥–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –≤–∞–ª–∏–¥–∞—Ü–∏—è YAML —Ñ–∞–π–ª–æ–≤

### ‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞

- **–°–∏–Ω—Ç–∞–∫—Å–∏—Å** - –≤—Å–µ —Ñ–∞–π–ª—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- **–õ–∏–Ω—Ç–µ—Ä** - –æ—à–∏–±–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ
- **–õ–æ–≥–∏–∫–∞** - —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ä–∞—Å—à–∏—Ä–µ–Ω—ã smoke tests

### ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **Ubuntu 24.04** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **Debian 12** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞  
- **AlmaLinux 9** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- **–†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ PHP** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ

---

## üìã –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

### üéØ –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–æ–≥–∏** –ø—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É** –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

### üîß –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–ò–∑—É—á–∏—Ç–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è** –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
2. **–î–æ–±–∞–≤–ª—è–π—Ç–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** –≤ –Ω–æ–≤—ã–µ –º–æ–¥—É–ª–∏
3. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–∞–ª–∏–¥–∞—Ü–∏—é** –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

---

## ‚úÖ –ó–ê–ö–õ–Æ–ß–ï–ù–ò–ï

**–í—Å–µ –≤–∞–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã!**

–ò–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä WorkerNet v5.0 —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç **–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω–Ω—É—é –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**:

- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ** —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ **–î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** –æ—à–∏–±–æ–∫
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –ø–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä—Å–∏–π** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** —Å–∏—Å—Ç–µ–º—ã

**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å —É–ª—É—á—à–µ–Ω–Ω–æ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é! üöÄ**

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:** 23 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –í–ê–ñ–ù–´–ï –ü–†–û–ë–õ–ï–ú–´ –†–ï–®–ï–ù–´**  
**–ö–∞—á–µ—Å—Ç–≤–æ:** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê **PRODUCTION-READY**
